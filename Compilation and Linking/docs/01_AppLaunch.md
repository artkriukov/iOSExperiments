# Запуск приложения

Что происходит в тот момент, когда мы нажимаем на иконку приложения в телефоне? Ядро операционной системы берет Executable binary приложения и помещает его в оперативную память.

<img src="img/AppLaunch/app-launch.png" alt="launch" width="700" height="300">

Дальше это же ядро запускает процесс под названием dyld или dynamical loader. 

<img src="img/AppLaunch/dyld.png" alt="dyld" width="700" height="300">

Этот dyld забираем из приложения все фреймворки («динамические библиотеки») и на жестком диске строит что-то вроде словаря, где:

- ключ — это линковочное имя библиотеки, данное ей статическим линкером ещё в момент компиляции;
- а значение словаря — это сама библиотека.

<img src="img/AppLaunch/dyld-name.png" alt="dyld" width="700" height="300">

После этого процессор начинает выполнять команды, описанные в Executable binary.

<img src="img/AppLaunch/cpu.png" alt="dyld" width="700" height="300">

Вуаля — приложение открылось! 

#### Что происходит когда мы вызываем функцию из динамической библиотеки?

Представим нам надо посмотреть сторис, у нас есть функция, как openstory, которая живет в одной из динамических библиотек. Когда мы «тапаем», динамический лоадер понимает, что этой функции ещё нет памяти. Тогда лоадер обращается к той библиотеке, где она есть, и загружает функцию, которая отвечает за открытие конкретного этой сторис.

<img src="img/AppLaunch/dynamic-story.png" alt="dyld" width="700" height="300">

Далее лоадер помещает сторис в оперативную память, процессор начинает её выполнять и у нас перед глазами открытая история.